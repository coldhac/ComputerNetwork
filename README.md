# ComputerNetwork
包含了北京大学2023年秋季学期计算机网络课程的Lab作业

计网的查重真的很严格，可以参考，切勿抄袭！！

2023年11月1日更新：lab1 以及相关 README 文档。

2024年1月15日更新：lab3 以及相关 README 文档。

## Lab1: MyFTP
详细功能介绍参考[PKU网络课程实践文档 - lab1](https://edu.n2sys.cn/#/tut_lab/lv1/README)，本代码基于对文档描述的复现，在此之外提高了代码可读性和程序鲁棒性。

功能实现主要分为以下几部分：
+ `limit.hpp`: 定义了一些常量限制，如文件名长度限制，文件大小限制等；
+ `header.hpp`: 定义了`header`报文结构体，定义了文档中报文常量，并声明了比较函数；
+ `sockall.hpp`: 定义了新的`recv`和`send`函数，避免出现缓冲区过小而无法传输大文件的问题；
+ `ftp_client.cpp`: 主要处理指令的分类，和客户端具体功能实现，额外补充了指令的帮助文档，通过`help`查看；
+ `ftp_server.cpp`: 主要处理报文的分类，和服务端具体功能实现，额外补充了对参数的检查，使用非法参数会退出程序。

虽然测试数据保证一定合法，但代码中还是实现了对各种意外情况的判断，错误发生时会使用标准错误流输出提示。

本地测试需要在`lab1-myftp/build/`目录下执行`cmake .. && make -j`，此目录下的两个可执行文件`ftp_server`和`ftp_client`是编写好的服务端和客户端程序。

## Lab3: Router
详细功能介绍参考[PKU网络课程实践文档 - lab3](https://edu.n2sys.cn/#/tut_lab/lv4/lab4)

根据要求实现了基于距离向量的路由算法，基于主机相较于交换机的性能优势，并未严格按照课件实现，而是大面积选用了 `std::map` 以提高性能。

由于 lab 模型并没有为交换机每个端口分配内网 ip, 在实现毒性逆转的过程中需要记录一个自定义的 `local_id` 来分辨交换机身份。由于需要保证每个交换机的身份不会冲突，修改了 `Router` 对象的生成函数，在调用时传入一个每次自加的静态变量以满足需求。

余下功能实现了简单的路由、`NAT` 以及防火墙功能，结合代码命名以及 lab 文档，不难看懂，恕不赘述。
